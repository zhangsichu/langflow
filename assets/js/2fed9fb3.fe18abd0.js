"use strict";(self.webpackChunklangflow_docs=self.webpackChunklangflow_docs||[]).push([[6108],{9080:(e,n,t)=>{t.r(n),t.d(n,{CH:()=>d,assets:()=>c,chCodeConfig:()=>p,contentTitle:()=>l,default:()=>g,frontMatter:()=>a,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"Deployment/deployment-prod-best-practices","title":"Best practices for Langflow on Kubernetes","description":"This guide provides best practices for deploying Langflow in production environments on Kubernetes.","source":"@site/docs/Deployment/deployment-prod-best-practices.mdx","sourceDirName":"Deployment","slug":"/deployment-prod-best-practices","permalink":"/deployment-prod-best-practices","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Best practices for Langflow on Kubernetes","slug":"/deployment-prod-best-practices"},"sidebar":"docs","previous":{"title":"Deployment architecture","permalink":"/deployment-architecture"},"next":{"title":"Deploy in development","permalink":"/deployment-kubernetes-dev"}}');var r=t(74848),s=t(28453),i=t(24754);const a={title:"Best practices for Langflow on Kubernetes",slug:"/deployment-prod-best-practices"},l=void 0,c={},d={annotations:i.hk,Code:i.Cy},p={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:!0,showCopyButton:!0,themeName:"github-dark"},u=[{value:"Resources and scaling",id:"resources-and-scaling",level:2},{value:"Estimate, test, and adjust",id:"estimate-test-and-adjust",level:3},{value:"Use an external PostgreSQL database",id:"use-an-external-postgresql-database",level:3},{value:"Use HPA for dynamic scaling",id:"use-hpa-for-dynamic-scaling",level:3},{value:"Failure points",id:"failure-points",level:2},{value:"Monitoring",id:"monitoring",level:2},{value:"Security",id:"security",level:2},{value:"See also",id:"see-also",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return d||m("CH",!1),d.Code||m("CH.Code",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="github-dark"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #c9d1d9;--ch-t-background: #0d1117;--ch-t-lighter-inlineBackground: #0d1117e6;--ch-t-editor-background: #0d1117;--ch-t-editor-foreground: #c9d1d9;--ch-t-editor-lineHighlightBackground: #6e76811a;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #1f6feb;--ch-t-tab-activeBackground: #0d1117;--ch-t-tab-activeForeground: #c9d1d9;--ch-t-tab-inactiveBackground: #010409;--ch-t-tab-inactiveForeground: #8b949e;--ch-t-tab-border: #30363d;--ch-t-tab-activeBorder: #0d1117;--ch-t-editorGroup-border: #30363d;--ch-t-editorGroupHeader-tabsBackground: #010409;--ch-t-editorLineNumber-foreground: #6e7681;--ch-t-input-background: #0d1117;--ch-t-input-foreground: #c9d1d9;--ch-t-input-border: #30363d;--ch-t-icon-foreground: #8b949e;--ch-t-sideBar-background: #010409;--ch-t-sideBar-foreground: #c9d1d9;--ch-t-sideBar-border: #30363d;--ch-t-list-activeSelectionBackground: #6e768166;--ch-t-list-activeSelectionForeground: #c9d1d9;--ch-t-list-hoverBackground: #6e76811a;--ch-t-list-hoverForeground: #c9d1d9; }'}}),"\n",(0,r.jsx)(n.p,{children:"This guide provides best practices for deploying Langflow in production environments on Kubernetes."}),"\n",(0,r.jsx)(n.h2,{id:"resources-and-scaling",children:"Resources and scaling"}),"\n",(0,r.jsx)(n.p,{children:"Langflow's minimum resource requirements vary by deployment type:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"IDE (development)"}),": Deploy both the Langflow visual editor (frontend) and API (backend). Typically, this is used for development environments where developers use the visual editor to create and manage flows before packaging and serving them through a production runtime deployment."]}),"\n",(0,r.jsx)(n.p,{children:"The frontend service requires a minimum of 512Mi RAM and 0.3 CPU per instance with 1 replica."}),"\n",(0,r.jsx)(n.p,{children:"The backend service requires a minimum of 1Gi RAM and 0.5 CPU per instance with 1 replica."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Runtime (production)"}),": Deploy the Langflow runtime for production flows, which is headless (backend only) service focused on serving the Langflow API. This is used for production environments where flows are executed programmatically without the need for the visual editor."]}),"\n",(0,r.jsx)(n.p,{children:"Minimum requirements include 2Gi RAM and 1000m (1 CPU) per instance with 3 replicas."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For more information about Langflow deployment types, see ",(0,r.jsx)(n.a,{href:"/deployment-architecture",children:"Langflow architecture on Kubernetes"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"estimate-test-and-adjust",children:"Estimate, test, and adjust"}),"\n",(0,r.jsx)(n.p,{children:"Start with the minimum recommended resources and replicas, then monitor and scale as needed based on your deployment's requirements and performance testing.\nConsider the following factors in your resource estimation and performance testing:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Flow complexity."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Volume of concurrent users and requests."}),"\n",(0,r.jsx)(n.p,{children:"For IDE (development) deployments, consider that frontend activity also pings the backend service, so you typically need to scale both the frontend and backend together."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Request payload content and size, particularly for file uploads in production deployments."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Storage requirements for cache, file management, and the Langflow database."}),"\n",(0,r.jsxs)(n.p,{children:["An ",(0,r.jsx)(n.a,{href:"#use-an-external-postgresql-database",children:"external PostgreSQL database"})," is recommended for production deployments."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Infrastructure options that might require more resources, such as multi-core CPUs."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"use-an-external-postgresql-database",children:"Use an external PostgreSQL database"}),"\n",(0,r.jsx)(n.p,{children:"An external PostgreSQL database is recommended for production deployments to improve scalability and reliability as compared to the default SQLite database."}),"\n",(0,r.jsxs)(n.p,{children:["Your resource allocation and replication strategy must be able to support the PostgreSQL service and storage.\nFor example, for a runtime (production) deployment, you might allocate 4Gi RAM, 2 CPU, and multiple replicas for high availability.\nTune PostgreSQL parameters, such as ",(0,r.jsx)(n.code,{children:"work_mem"})," and ",(0,r.jsx)(n.code,{children:"shared_buffers"}),", as needed based on resource requirements and usage metrics."]}),"\n",(0,r.jsx)(n.p,{children:"Recommended configurations include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Persistent storage to prevent data loss on container shutdown"}),"\n",(0,r.jsx)(n.li,{children:"High Availability (HA) or Active-Active for automatic failover, scaling, and load balancing"}),"\n",(0,r.jsx)(n.li,{children:"Shared databases for multi-instance deployments"}),"\n",(0,r.jsxs)(n.li,{children:["Shared storage, such as NFS or cloud storage, for multi-instance deployments to access large files stored on disk, such as in ",(0,r.jsx)(n.code,{children:"/opt/langflow/data/"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["For more information, see ",(0,r.jsx)(n.a,{href:"/configuration-custom-database",children:"Configure an external PostgreSQL database"})," and ",(0,r.jsx)(n.a,{href:"/enterprise-database-guide",children:"Langflow database guide for enterprise DBAs"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"use-hpa-for-dynamic-scaling",children:"Use HPA for dynamic scaling"}),"\n",(0,r.jsx)(n.p,{children:"Load balancing and dynamic scaling are recommended for runtime (production) deployments."}),"\n",(0,r.jsx)(n.p,{children:"For example, consider using Horizontal Pod Autoscaler (HPA) in Kubernetes to dynamically scale based on CPU or memory usage.\nThe following example shows a Langflow HPA configuration with CPU-based scaling:"}),"\n",(0,r.jsx)(d.Code,{codeConfig:p,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"apiVersion",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"autoscaling/v2",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"kind",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"HorizontalPodAutoscaler",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"metadata",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"  name",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"langflow-runtime-hpa",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"spec",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"  scaleTargetRef",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"    apiVersion",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"apps/v1",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"    kind",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"Deployment",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"    name",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"langflow-runtime",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"  minReplicas",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"1",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  maxReplicas",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"10",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  metrics",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"  - ",props:{style:{color:"#C9D1D9"}}},{content:"type",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"Resource",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"    resource",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"      name",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"cpu",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"      target",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"        type",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"Utilization",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"        averageUtilization",props:{style:{color:"#7EE787"}}},{content:": ",props:{style:{color:"#C9D1D9"}}},{content:"80",props:{style:{color:"#79C0FF"}}}]}],lang:"yaml"},annotations:[]}]}),"\n",(0,r.jsx)(n.h2,{id:"failure-points",children:"Failure points"}),"\n",(0,r.jsx)(n.p,{children:"Langflow's reliability in production depends on mitigating key failure points, particularly around the database, file system, and instance availability:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Database failures"}),": See ",(0,r.jsx)(n.a,{href:"/enterprise-database-guide",children:"Langflow database guide for enterprise DBAs"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"File system failures"}),": Concurrency issues in file caching, such as ",(0,r.jsx)(n.code,{children:"/app/data/.cache"}),", can cause IO errors in multi-instance setups.\nTo avoid this, use a shared, POSIX-compliant file system or cloud storage.\nUse persistent volumes instead of ramdisk solutions that result in data loss on container shutdown."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Instance failures"}),": Deploy multiple replicas to avoid service disruptions when a single instance fails. Use health checks to detect and replace failed pods."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Network and dependency failures"}),": External APIs or services used in flows may fail, causing flow errors. Implement retry logic and error handling in flows or application code. Monitor network latency and dependency health."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,r.jsx)(n.p,{children:"Effective monitoring ensures Langflow operates reliably and performs well under varying loads:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Database monitoring"}),": See ",(0,r.jsx)(n.a,{href:"/enterprise-database-guide",children:"Langflow database guide for enterprise DBAs"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Application logs"}),": Collect and analyze logs for errors, warnings, and flow execution issues. Centralize logs using tools like ELK Stack or Fluentd. You can also inspect ",(0,r.jsx)(n.a,{href:"/logging",children:"Langflow logs"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Resource usage"}),": Track CPU, memory, and disk usage of Langflow instances. Use Prometheus and Grafana for real-time metrics collection and monitoring in Kubernetes."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API performance"}),": Monitor response times, error rates, and request throughput. Set alerts for high latency or error spikes."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Observability tools"}),": Integrate with ",(0,r.jsx)(n.a,{href:"/integrations-langwatch",children:"LangWatch"})," or ",(0,r.jsx)(n.a,{href:"/integrations-opik",children:"Opik"})," for detailed flow tracing and metrics. Use these tools to debug flow performance and optimize execution."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,r.jsx)(n.p,{children:"Running Langflow in production requires robust security measures to protect the application, data, and users.\nFollow industry best practices and use secure Langflow configurations, such as the following:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Container security"}),": Apply security best practices for containerized applications. For example, set ",(0,r.jsx)(n.code,{children:"readOnlyRootFilesystem: true"})," in runtime (production) containers to prevent unauthorized modifications. Restrict access to files and codebases containing sensitive data and configuration files that shouldn't be exposed to unauthorized users."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Secrets management"}),": Store sensitive data like API keys and PostgreSQL credentials in Kubernetes secrets or external secrets managers like HashiCorp Vault."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authentication, authorization, and access control"}),": Start your Langflow server with authentication enabled, as explained in ",(0,r.jsx)(n.a,{href:"/api-keys-and-authentication",children:"API keys and authentication"}),". Restrict network and resource access with firewalls, network policies, network security groups, or VPCs. For example, restrict PostgreSQL database access to Langflow instances."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Encryption and privacy"}),": Follow industry best practices and legal requirements for data privacy and encryption of data in transit and at rest, including GDPR requirements, HTTPS, TLS, and SSL. For example, configure PostgreSQL with valid SSL certificates and append ",(0,r.jsx)(n.code,{children:"?sslmode=require"})," or ",(0,r.jsx)(n.code,{children:"?sslmode=verify-full"})," to the connection string to enable SSL for database connections."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security posture maintenance"}),": Conduct regular security audits, keep current with software updates, and monitor for suspicious activity using intrusion detection systems."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/deployment-kubernetes-prod",children:"Deploy the Langflow production environment on Kubernetes"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/langflow-ai/langflow-helm-charts",children:"Langflow Helm Charts repository"})}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}function m(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var o=t(96540);const r={},s=o.createContext(r);function i(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);